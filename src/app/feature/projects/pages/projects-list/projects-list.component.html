<div class="flex items-center justify-between mb-4">
  <h1 class="text-2xl font-bold">Projects</h1>
  <button
    class="btn btn-primary"
    type="button"
    (click)="openCreateProjectDialog()"
  >
    New project
  </button>
</div>

<ul class="menu bg-base-200 rounded-box">
  @for (p of store.projects(); track p.id) {
    <li class="flex items-center">
      <a
        (click)="select(p.id)"
        [class.active]="store.selected()?.id === p.id"
      >
        {{ p.name }}
      </a>
      <div class="ml-auto flex gap-2">
        <button
          class="btn btn-xs"
          type="button"
          (click)="openRenameProjectDialog(p.id, p.name)"
        >
          Rename
        </button>
        <button
          class="btn btn-xs btn-error"
          type="button"
          (click)="openDeleteProjectDialog(p.id, p.name)"
        >
          Delete
        </button>
      </div>
    </li>
  }
</ul>

<app-confirm-dialog
  [open]="isDeleteProjectDialogOpen()"
  title="Delete project"
  [message]="deleteProjectMessage()"
  confirmLabel="Delete"
  cancelLabel="Cancel"
  [destructive]="true"
  (confirmed)="confirmDeleteProject()"
  (cancelled)="cancelDeleteProject()"
></app-confirm-dialog>

<app-name-dialog
  [open]="isProjectNameDialogOpen()"
  [title]="projectNameDialogTitle()"
  label="Project name"
  [name]="editingProjectName()"
  [confirmLabel]="projectNameDialogConfirmLabel()"
  cancelLabel="Cancel"
  (confirmed)="handleProjectNameConfirmed($event)"
  (cancelled)="cancelProjectNameDialog()"
></app-name-dialog>
